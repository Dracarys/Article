# 面试题系列之设计模式

### 什么是设计模式？

### MVC的缺点

容易导致 Controller 过分臃肿

### 其它架构

MVP、MVVM等

### MVVM如何实现绑定

### 单例

### Delegate、Notification、KOV的区别，优缺点

- Delegate 是单向的委托，你只能委托给一个代理对象；
- Notification 可以一对多的发送消息，但是需要你主动发送，接收方需要注册；
- KVO 也可以实现一对多，且不需要主动触发，

#### NSNotification 和 KVO 的区别和用法是什么？什么时候应该使用通知，什么时候应该使用KVO，它们的实现上有什么区别吗？如果用protocol和delegate（或者delegate的Array）来实现类似的功能可能吗？如果可能，会有什么潜在的问题？如果不能，为什么？

1. 观察者和被观察者都必须是 NSObject 的子类，因为 OC 中 KVO 的实现基于 KVC 和 runtime 机制，只有是 NSObject 的子类才能利用这些特性；
2. 观察的属性需要使用 dynamic 关键字修饰，表示该属性的存取都由 runtime 在运行时来决定，由于 Swift 基于效率的考量默认禁止了动态派发机制，因此要加上该修饰符来开启动态派发。

### 设计一个方案来检测 KVO 的同步异步问题，willChange 和 didChange 的不同点

### kVO在多线程中的行为
- KVO 是同步的，一旦对象的属性发生变化，只有用同步的方式，才能保证所有观察者的方法能够执行完成。KVO 监听方法中，不要有太耗时的操作。

- KVO 的方法调用，是在对应的线程中执行的。在子线程修改观察属性时，观察者回调方法将在子线程中执行。

- 在多个线程同时修改一个观察属性的时候，KVO 监听方法中会存在资源抢夺的问题，需要使用互斥锁。如果涉及到多线程，KVO 要特别小心，通常 KVO 只是做一些简单的观察和处理，千万不要搞复杂了，KVO的监听代码，一定要简单。

[参考](http://www.cnblogs.com/QianChia/p/5771074.html)

### 如果现在要实现一个下载功能，如何设计，每个类都觉题做什么？

### KVC如何实现的
模型的性质是通过一个简单的键（通常是个字符串）来指定的。视图和控制器通过键来查找相应的属性值。在一个给定的实体中，同一个属性的所有值具有相同的数据类型。键-值编码技术用于进行这样的查找—它是一种间接访问对象属性的机制。
键路径是一个由用点作分隔符的键组成的字符串，用于指定一个连接在一起的对象性质序列。第一个键的
性质是由先前的性质决定的，接下来每个键的值也是相对于其前面的性质。键路径使您可以以独立于模型
实现的方式指定相关对象的性质。通过键路径，您可以指定对象图中的一个任意深度的路径，使其指向相
关对象的特定属性。

#### KVC keyPaht 的集合运算符如何使用？

#### KVC 和 KVO 中的 KeyPath 一定是属性吗？

- KVC 实例变量也可以
- KVO 如果不是自动合成的属性，需要自己手动触发

### 如何设计一个网络请求库

### 设计一个图片缓存

### 简单工厂模式、工厂模式以及抽象工厂模式？

[参考一](https://www.jianshu.com/p/847af218b1f0)
[参考二](https://blog.csdn.net/shihuboke/article/details/73921535)

#### 抽象工程模式在 Cocoa SDK 中的那些类中有体现？

### 项目组件化用过吗？怎么接耦的？
[参考](http://www.code4app.com/blog-822715-1562.html)

### 你实现过一个框架或者库以供别人使用么？如果有，请谈一谈构建框架或者库时候的经验；如果没有，请设想和设计框架的 public 的API，并指出大概需要如何做、需要注意一些什么方面，来使别人容易地使用你的框架

#### 设计一个监控App启动速度的模块，说下大体的设计思路

#### 如何捕捉Crash，设计思路。
[参考](https://blog.csdn.net/skylin19840101/article/details/50955808)